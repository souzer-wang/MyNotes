## 题意

实现一个基本的计算器，输入为一个字符串，输出表达式的计算值

表达式中只包含 数字、加减符号、左右符号和空格

---
## 解题

针对本题，由于括号的存在，我们可以利用栈来协助解题。
具体需要这样一些变量：res（阶段性的计算和）、num（当前数值），sign（当前数值的符号）

遍历字符串，针对遍历到的字符c，我们分以下几种情况来讨论:
1. 如果遍历到的是数字，那么只需要更新当前数值：num=num\*10+int(c)
2. 如果遍历到的是加减符号（可以放一起讨论），将前面的数字乘上它的符号加到res；同时重置当前数值为0，更新当前数值符号
3. 如果遍历到的是左括号，那么将原先的res存入栈中，而后把之前遍历到的符号（即括号中最终值得符号）存入栈中，重置res为0，重置符号
4. 如果遍历到得是右括号，计算当前的最后一个值，当前括号内的值计算完毕，然后将当前数值重置为0，从栈中取出当前括号最终值得符号（遍历到左括号时存入的），再取出当前括号之前的res，相加，得到结果
5. 如果算式最后的是数字的话，那么上面的遍历最后还差一步，就是把最后一个数值加到最终结果。

```python
def calculate(s):
    res,num,sign=0,0,1
    stack=[]
    for c in s:
        if c.isdigit():
            num=num*10+int(c)
        elif c in '+-':
            res+=sign*num
            num=0
            sign=1 if c=='+' else -1
        elif c=='(':
            stack.append(res)#将先前计算结果存入栈中
            stack.append(sign)#将当前括号内最终值的符号存到栈中
            sign=1#重置符号
            res=0#重置计算结果
        elif c==')':
            res+=num*sign#先计算出当前括号内的最终计算值
            res*=stack.pop()#括号内最终值乘上它的符号
            res+=stack.pop()#和之前的计算结果相加
            num=0#重置num
    res+=num*sign
    return res
```